# Лабораторная №4 

## Задание (со звёздочкой)

Сделать красиво работу с секретами. Например, поднять Hashicorp Vault и сделать так, чтобы ci/cd пайплайн (или любой другой ваш сервис) ходил туда, брал секрет, использовал его не светя в логах. В Readme аргументировать почему ваш способ красивый, а также описать, почему хранение секретов в CI/CD переменных репозитория не является хорошей практикой.

## Ход работы
Хранение секретов в CI/CD переменных репозитория не является хорошей практикой!

<b>Почему:</b>
1. Переменные окружения в CI/CD-платформах обычно доступны любому, у кого есть доступ к репозиторию (и случайные pull requests - не исключение). 
2. Если CI/CD логи не настроены как надо, секреты могут случайно оказаться в логах, где их могут увидеть злоумышлениики.
3. Нельзя разграничить доступ пользователей или процессов. Все пользователи репозитория могут иметь доступ к секретам. Повод задуматься...
4. Каждый из секретов будет привязан к конкретному репозиторию. Его нельзя будет исаользовать где-то ещё. При удалении репозитория все секреты потеряются.
5. Некоторые CI/CD платформы хранят переменные в текстовом виде или недостаточно защищают их при передаче данных. Если платформа не шифрует секреты, они могут быть уязвимы к атаке перехвата.

<b>Что делать:</b> Использовать специализированные менеджеры секретов (например, HashiCorp Vault, AWS Secrets Manager, или Azure Key Vault). Они обеспечивают более высокий уровень безопасности, поддерживают шифрование и аудит доступа к секретам. 

Изначально мы хотели использовать AWS Secrets Manager, но возникли сложности с привязкой карты. Поэтому дальше будем работать с HashiCorp Vault.

### Не хочется потерять эти материалы по теме:
1. [Используем Hashicorp Vault для хранения секретов](https://habr.com/ru/articles/653927/)
2. [CI/CD-пайплайн на примере одного небольшого проекта Уральской Дирекции ИТ](https://habr.com/ru/companies/alfa/articles/359030/)
3. [Избавляемся от паролей в репе с кодом с помощью HashiCorp Vault Dynamic Secrets](https://habr.com/ru/companies/quadcode/articles/565690/comments/)
4. [Как управлять вашими секретами с git-crypt](https://habr.com/ru/companies/nixys/articles/570306/)
